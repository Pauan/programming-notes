.fs.nu
[source]
----
(USE {} = "nulan:Task")
(USE {} = "nulan:Stream")

(EXPORT { fs-read-file = fs_read_file
        | fs-make-file! = fs_make_file
        | fs-make-symlink! = fs_make_symlink
        | fs-make-directory! = fs_make_directory
        #| fs-make-temporary-file! = fs_make_temporary_file

        | fs-remove! = fs_remove
        | fs-rename! = fs_rename
        | fs-copy! = fs_copy

        | fs-files = fs_files
        | fs-files-recursive = fs_files_recursive }

  (FFI-IMPORT "fs"
    (fs_read_file :: (-> String (Stream String)))

    (fs_make_file :: (-> String (Stream String) (Task Void)))

    (fs_make_symlink :: (-> String String (Task Void)))

    (fs_make_directory :: (-> String (Task Void)))

    #(fs_make_temporary_file :: (-> (Stream String) (Stream String)))

    (fs_remove :: (-> String (Task Void)))

    (fs_rename :: (-> String String (Task Void)))

    (fs_copy :: (-> String String (Task Void)))

    (fs_files :: (-> String (Stream String)))

    (fs_files_recursive :: (-> String (Stream String)))))
----

.Examples
[source]
----
# Reads the file "foo" (one line at a time),
# then converts each line to uppercase,
# then keeps only the lines that are equal to "TEST",
# then writes those lines to the file "bar"
(>> (<< (fs-read-file "foo")
        (split-lines)
        (map uppercase)
        (keep -> s (equal? s "TEST")))
    (fs-make-file! "bar"))
----
